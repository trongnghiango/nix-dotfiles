<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

  <!-- ========================================== -->
  <!-- 1. CẤU HÌNH RENDER (ĐÃ SỬA LẠI CHO X230)   -->
  <!-- ========================================== -->
  <match target="font">
    <edit name="antialias" mode="assign">
      <bool>true</bool>
    </edit>
    
    <edit name="hinting" mode="assign">
      <bool>true</bool>
    </edit>
    
    <!-- QUAN TRỌNG: Đổi hintfull -> hintslight -->
    <!-- hintslight giữ dáng chữ tự nhiên, giúp Inter trông dày dặn hơn -->
    <edit name="hintstyle" mode="assign">
      <const>hintslight</const>
    </edit>
    
    <edit name="rgba" mode="assign">
      <const>rgb</const>
    </edit>
    
    <edit name="lcdfilter" mode="assign">
      <const>lcddefault</const>
    </edit>
  </match>

  <!-- ========================================== -->
  <!-- 2. HACK ĐỘ DÀY (GIẢI QUYẾT VẤN ĐỀ MỎNG)    -->
  <!-- ========================================== -->
  <!-- Đoạn này ép hệ thống: Nếu gặp Inter Regular thì đổi thành Medium -->
  <match target="pattern">
    <test name="family" compare="contains">
      <string>Inter</string>
    </test>
    <!-- Nếu yêu cầu weight <= 400 (Normal/Regular) -->
    <test name="weight" compare="less_eq">
      <int>400</int>
    </test>
    <!-- Thì đổi thành weight 500 (Medium) -->
    <edit name="weight" mode="assign">
      <const>semibold</const>
    </edit>
  </match>

  <!-- ========================================== -->
  <!-- 3. SẮP XẾP ƯU TIÊN FONT (FALLBACK)         -->
  <!-- ========================================== -->
  
  <alias>
    <family>sans-serif</family>
    <prefer>
      <!-- Nên dùng Inter thường thay vì Display cho màn hình nhỏ -->
      <family>Inter</family> 
      <family>Noto Sans</family>
      <family>Noto Color Emoji</family>
      <family>DejaVu Sans</family>
    </prefer>
  </alias>

  <alias>
    <family>serif</family>
    <prefer>
      <family>Noto Serif</family>
      <family>Liberation Serif</family>
      <family>Noto Color Emoji</family>
      <family>DejaVu Serif</family>
    </prefer>
  </alias>

  <alias>
    <family>monospace</family>
    <prefer>
      <family>JetBrainsMonoNLNerdFont</family>
      <family>Noto Sans Mono</family>
      <family>Noto Color Emoji</family>
      <family>DejaVu Sans Mono</family>
    </prefer>
  </alias>

</fontconfig>
