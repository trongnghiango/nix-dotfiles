<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

  <!-- 1. CẤU HÌNH RENDER TỐI ƯU CHO MÀN HÌNH X230 -->
  <match target="font">
    <edit name="antialias" mode="assign"><bool>true</bool></edit>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <!-- hintslight giúp các font hiện đại như Inter trông tự nhiên và dày hơn -->
    <edit name="hintstyle" mode="assign"><const>hintslight</const></edit>
    <edit name="rgba" mode="assign"><const>rgb</const></edit>
    <edit name="lcdfilter" mode="assign"><const>lcddefault</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- 2. HACK ĐỘ DÀY CHO INTER (GIẢI QUYẾT VẤN ĐỀ CHỮ MỎNG) -->
  <!-- Ép Inter từ Regular (400) lên SemiBold (600) để dễ đọc hơn trên màn hình thấp -->
  <match target="pattern">
    <test name="family" compare="contains"><string>Inter</string></test>
    <test name="weight" compare="less_eq"><int>100</int></test> <!-- Match Regular -->
    <edit name="weight" mode="assign"><const>semibold</const></edit>
  </match>

  <!-- 3. THIẾT LẬP THỨ TỰ ƯU TIÊN (FALLBACK) -->
  
  <!-- Sans-serif (Dùng cho giao diện, trình duyệt) -->
  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Inter</family>               <!-- Font custom bạn tải về -->
      <family>Noto Sans</family>           <!-- Hệ thống cài -->
      <family>Noto Color Emoji</family>    <!-- Hệ thống cài -->
    </prefer>
  </alias>

  <!-- Monospace (Dùng cho ST, Neovim) -->
  <alias>
    <family>monospace</family>
    <prefer>
      <family>JetBrainsMono Nerd Font</family> <!-- Font custom bạn tải về -->
      <family>Noto Sans Mono</family>          <!-- Hệ thống cài -->
      <family>Noto Color Emoji</family>        <!-- Hệ thống cài -->
    </prefer>
  </alias>

  <!-- Serif (Dùng cho văn bản) -->
  <alias>
    <family>serif</family>
    <prefer>
      <family>Noto Serif</family>
      <family>Noto Color Emoji</family>
    </prefer>
  </alias>

  <!-- 4. CHỐNG LỖI HIỂN THỊ EMOJI -->
  <!-- Đảm bảo Emoji luôn được vẽ bằng Noto Color Emoji dù ở bất kỳ đâu -->
  <match target="pattern">
    <test qual="any" name="family"><string>emoji</string></test>
    <edit name="family" mode="assign" binding="same"><string>Noto Color Emoji</string></edit>
  </match>

</fontconfig>
