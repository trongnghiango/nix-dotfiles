#!/bin/sh

case $BUTTON in
    1) notify-send "üîã Battery Info" "Status: $(cat /sys/class/power_supply/BAT0/status)
Capacity: $(cat /sys/class/power_supply/BAT0/capacity)%" ;;
    3) notify-send "üîã Battery module" "üîã: discharging
üõë: not charging
‚ôª: stagnant charge
üîå: charging
‚ö°: charged
‚ùó: battery very low!
- Scroll to adjust brightness." ;;
    4) brightnessctl set +1% ;;
    5) brightnessctl set 1%- ;;
    6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

BATTERY="/sys/class/power_supply/BAT0"
[ ! -d "$BATTERY" ] && BATTERY="/sys/class/power_supply/BAT1"

STATUS_TEXT=$(cat "$BATTERY/status" 2>/dev/null)
case "$STATUS_TEXT" in
    "Full") ICON="‚ö°" ;;
    "Discharging") ICON="üîã" ;;
    "Charging") ICON="üîå" ;;
    "Not charging") ICON="üõë" ;;
    "Unknown") ICON="‚ôªÔ∏è" ;;
    *) ICON="üîã" ;;
esac

CAPACITY=$(cat "$BATTERY/capacity" 2>/dev/null)
WARN=""
if [ "$STATUS_TEXT" = "Discharging" ] && [ "$CAPACITY" -le 25 ]; then
    WARN="‚ùó"
fi

printf "%s%s%d%%\n" "$ICON" "$WARN" "$CAPACITY"
