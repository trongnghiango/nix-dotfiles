#!/bin/bash
# ~/.local/bin/dashboard

show_dashboard() {
  clear
  echo "╔════════════════════════════════════════╗"
  echo "║         ARCH + DWM + CLI DEV           ║"
  echo "╠════════════════════════════════════════╣"

  # System status
  echo "║  $(date '+%Y-%m-%d %H:%M:%S')"
  echo "║  Uptime: $(uptime -p)"
  echo "║  Load: $(cat /proc/loadavg | awk '{print $1,$2,$3}')"

  # Docker status
  if command -v docker &>/dev/null; then
    echo "║  Docker: $(docker ps -q | wc -l) running"
  fi

  # Git status
  if git rev-parse --git-dir &>/dev/null; then
    echo "║  Git: $(git branch --show-current)"
  fi

  echo "╠════════════════════════════════════════╣"
  echo "║  [1] Neovim Sessions                   ║"
  echo "║  [2] Tmux Sessions                     ║"
  echo "║  [3] Docker Containers                 ║"
  echo "║  [4] Kubernetes Context                ║"
  echo "║  [5] System Monitors                   ║"
  echo "║  [6] Quick Notes                       ║"
  echo "║  [q] Quit                              ║"
  echo "╚════════════════════════════════════════╝"

  read -n 1 -p "Select: " choice
  echo

  case $choice in
  1) nvim +"SessionManager load_session" ;;
  2) tmux ls | fzf | xargs tmux attach -t ;;
  3) lazydocker ;;
  4) kubectl config get-contexts | fzf | awk '{print $1}' | xargs kubectl config use-context ;;
  5) btop ;;
  6) nvim ~/notes/$(date +%Y-%m-%d).md ;;
  q) exit 0 ;;
  esac
}

# Bind to Mod+Shift+d trong dwm

show_dashboard
